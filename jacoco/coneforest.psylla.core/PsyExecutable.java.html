<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PsyExecutable.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Psylla v0.22.1</a> &gt; <a href="index.source.html" class="el_package">coneforest.psylla.core</a> &gt; <span class="el_source">PsyExecutable.java</span></div><h1>PsyExecutable.java</h1><pre class="source lang-java linenums">package coneforest.psylla.core;

import coneforest.psylla.runtime.*;
import java.util.Comparator;
import java.util.function.BinaryOperator;
import java.util.function.Consumer;
import java.util.function.Function;
import java.util.function.Predicate;
import java.util.function.Supplier;
import java.util.function.UnaryOperator;

@Type(&quot;executable&quot;)
public interface PsyExecutable
	extends PsyObject
{

	@Override
	public void invoke(final PsyContext oContext);

	public default void invokeAndHandle(final PsyContext oContext)
	{
<span class="fc" id="L22">		final var execLevel=oContext.execLevel();</span>
<span class="fc" id="L23">		invoke(oContext);</span>
<span class="fc" id="L24">		oContext.handleExecutionStack(execLevel);</span>
<span class="fc" id="L25">	}</span>

	/**
	*	{@return a {@code Predicate} view of this {@code executable}}
	*
	*	@param &lt;T&gt; the type of the input to the predicate.
	*	@param oContext the {@code context} in which this predicate will be invoked.
	*/
	public default &lt;T extends PsyObject&gt; Predicate&lt;T&gt; asPredicate(final PsyContext oContext)
	{
<span class="fc" id="L35">		final var ostack=oContext.operandStack();</span>
<span class="fc" id="L36">		return new Predicate&lt;T&gt;()</span>
<span class="fc" id="L37">			{</span>
				@Override
				public boolean test(final T o)
				{
<span class="fc" id="L41">					ostack.push(o);</span>
<span class="fc" id="L42">					invokeAndHandle(oContext);</span>
<span class="fc" id="L43">					return ((PsyBoolean)ostack.pop()).booleanValue();</span>
					// TODO: stop
				}
			};
	}

	/**
	*	{@return a {@code Function} view of this {@code executable}}
	*
	*	@param &lt;T&gt; the type of the input to the function.
	*	@param &lt;R&gt; the type of the return value of the function.
	*	@param oContext the {@code context} in which this function will be invoked.
	*/
	@SuppressWarnings(&quot;unchecked&quot;)
	public default &lt;T extends PsyObject, R extends PsyObject&gt; Function&lt;T, R&gt; asFunction(final PsyContext oContext)
	{
<span class="fc" id="L59">		final var ostack=oContext.operandStack();</span>
<span class="fc" id="L60">		return new Function&lt;T, R&gt;()</span>
<span class="fc" id="L61">			{</span>
				@Override
				public R apply(final T o)
				{
<span class="fc" id="L65">					ostack.push(o);</span>
<span class="fc" id="L66">					invokeAndHandle(oContext);</span>
					//throw new RuntimeException();
<span class="fc" id="L68">					return (R)ostack.pop();</span>
					// TODO: stop
				}
			};
	}

	/**
	*	{@return an {@code UnaryOperator} view of this {@code executable}}
	*
	*	@param &lt;T&gt; the type of the input to the operator and its return value.
	*	@param oContext the {@code context} in which this operator will be invoked.
	*/
	@SuppressWarnings(&quot;unchecked&quot;)
	public default &lt;T extends PsyObject&gt; UnaryOperator&lt;T&gt; asUnaryOperator(final PsyContext oContext)
	{
<span class="fc" id="L83">		final var ostack=oContext.operandStack();</span>
<span class="fc" id="L84">		return new UnaryOperator&lt;T&gt;()</span>
<span class="fc" id="L85">			{</span>
				@Override
				public T apply(final T o)
				{
<span class="fc" id="L89">					ostack.push(o);</span>
<span class="fc" id="L90">					invokeAndHandle(oContext);</span>
<span class="fc" id="L91">					return (T)ostack.pop();</span>
					// TODO: stop
				}
			};
	}

	/**
	*	{@return an {@code BinaryOperator} view of this {@code executable}}
	*
	*	@param &lt;T&gt; the type of the inputs to the operator and its return value.
	*	@param oContext the {@code context} in which this operator will be invoked.
	*/
	public default &lt;T extends PsyObject&gt; BinaryOperator&lt;T&gt; asBinaryOperator(final PsyContext oContext)
	{
<span class="fc" id="L105">		final var ostack=oContext.operandStack();</span>
<span class="fc" id="L106">		return new BinaryOperator&lt;T&gt;()</span>
<span class="fc" id="L107">			{</span>
				@SuppressWarnings(&quot;unchecked&quot;)
				@Override
				public T apply(final T o1, final T o2)
				{
<span class="fc" id="L112">					ostack.push(o1);</span>
<span class="fc" id="L113">					ostack.push(o2);</span>
<span class="fc" id="L114">					invokeAndHandle(oContext);</span>
<span class="fc" id="L115">					return (T)ostack.pop();</span>
					// TODO: stop
				}
			};
	}

	/**
	*	{@return an {@code Comparator} view of this {@code executable}}
	*
	*	@param &lt;T&gt; the type of the inputs to the comparator.
	*	@param oContext the {@code context} in which this comparator will be invoked.
	*/
	public default &lt;T extends PsyObject&gt; Comparator&lt;T&gt; asComparator(final PsyContext oContext)
	{
<span class="fc" id="L129">		final var ostack=oContext.operandStack();</span>
<span class="fc" id="L130">		return new Comparator&lt;T&gt;()</span>
<span class="fc" id="L131">			{</span>
				@Override
				public int compare(final T o1, final T o2)
				{
<span class="fc" id="L135">					ostack.push(o1);</span>
<span class="fc" id="L136">					ostack.push(o2);</span>
<span class="fc" id="L137">					invokeAndHandle(oContext);</span>
<span class="fc" id="L138">					return ((PsyInteger)ostack.pop()).intValue();</span>
				}
			};
	}

	/**
	*	{@return an {@code Supplier} view of this {@code executable}}
	*
	*	@param &lt;T&gt; the type of the return value of the supplier.
	*	@param oContext the {@code context} in which this supplier will be invoked.
	*/
	public default &lt;T extends PsyObject&gt; Supplier&lt;T&gt; asSupplier(final PsyContext oContext)
	{
<span class="nc" id="L151">		final var ostack=oContext.operandStack();</span>
<span class="nc" id="L152">		return new Supplier&lt;T&gt;()</span>
<span class="nc" id="L153">			{</span>
				@SuppressWarnings(&quot;unchecked&quot;)
				@Override
				public T get()
				{
<span class="nc" id="L158">					invokeAndHandle(oContext);</span>
<span class="nc" id="L159">					return (T)ostack.pop();</span>
				}
			};
	}

	/**
	*	{@return an {@code Consumer} view of this {@code executable}}
	*
	*	@param &lt;T&gt; the type of the input to the consumer.
	*	@param oContext the {@code context} in which this consumer will be invoked.
	*/
	public default &lt;T extends PsyObject&gt; Consumer&lt;T&gt; asConsumer(final PsyContext oContext)
	{
<span class="fc" id="L172">		final var ostack=oContext.operandStack();</span>
<span class="fc" id="L173">		return new Consumer&lt;T&gt;()</span>
<span class="fc" id="L174">			{</span>
				@Override
				public void accept(final T o)
				{
<span class="fc" id="L178">					ostack.push(o);</span>
<span class="fc" id="L179">					invokeAndHandle(oContext);</span>
<span class="fc" id="L180">				}</span>
			};
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202410190809</span></div></body></html>